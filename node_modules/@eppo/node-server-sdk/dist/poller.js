"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function initPoller(interval, 
// eslint-disable-next-line @typescript-eslint/no-explicit-any
callback) {
    let stopped = false;
    const stop = () => {
        stopped = true;
    };
    async function poll() {
        if (stopped) {
            return;
        }
        try {
            await callback();
        }
        catch (error) {
            if (!error.isRecoverable) {
                stop();
            }
            console.error(`Error polling configurations: ${error.message}`);
        }
        setTimeout(poll, interval);
    }
    return {
        start: poll,
        stop,
    };
}
exports.default = initPoller;
//# sourceMappingURL=poller.js.map